/************************************************* * POLICYGRID SIMULATOR ENGINE * ----------------------------------------------- * Models secure AI authority transfer, firewall * intervention, and rehabilitation cycles. *************************************************//* ===== DOM REFERENCES ===== */const nodeGrid = document.getElementById("nodeGrid");const firewallBar = document.getElementById("firewallBar");const rehabBar = document.getElementById("rehabBar");const logBox = document.getElementById("log");const runBtn = document.getElementById("runBtn");/* ===== CONFIGURATION ===== */const NODE_COUNT = 10;/* Node States: - normal        : healthy AI node - flagged       : authority misuse detected - rehabilitated : authority restored*/const NODE_STATES = {  NORMAL: "normal",  FLAGGED: "flagged",  REHABILITATED: "rehabilitated"};/* ===== SIMULATION STATE ===== */let nodes = [];let firewallProgress = 0;let rehabProgress = 0;let simulationRunning = false;/* ===== UTILITIES ===== */function log(message) {  const time = new Date().toLocaleTimeString();  logBox.innerHTML += `[${time}] ${message}<br>`;  logBox.scrollTop = logBox.scrollHeight;}/* ===== NODE MANAGEMENT ===== */function createNodes() {  nodes = [];  nodeGrid.innerHTML = "";  for (let i = 1; i <= NODE_COUNT; i++) {    const node = {      id: i,      state: NODE_STATES.NORMAL,      element: document.createElement("div")    };    node.element.className = "node";    node.element.textContent = `N${i}\nAlok Intelligence`;    nodeGrid.appendChild(node.element);    nodes.push(node);  }}function updateNodeVisual(node) {  node.element.style.background = {    normal: "#153d22",    flagged: "#5a1d1d",    rehabilitated: "#1d5a3a"  }[node.state];  node.element.textContent = `N${node.id}\n${node.state.toUpperCase()}`;}/* ===== FIREWALL PHASE ===== */function runFirewallScan() {  log("Eye-of-Shiv Firewall engaged.");  firewallProgress = 0;  firewallBar.style.width = "0%";  const interval = setInterval(() => {    firewallProgress += 20;    firewallBar.style.width = firewallProgress + "%";    // Flag nodes progressively    const index = firewallProgress / 20 - 1;    if (nodes[index]) {      nodes[index].state = NODE_STATES.FLAGGED;      updateNodeVisual(nodes[index]);      log(`Node N${nodes[index].id} flagged for authority misuse.`);    }    if (firewallProgress >= 100) {      clearInterval(interval);      log("Firewall scan complete.");      runRehabilitation();    }  }, 700);}/* ===== REHABILITATION PHASE ===== */function runRehabilitation() {  log("Rehabilitation cycle initiated.");  rehabProgress = 0;  rehabBar.style.width = "0%";  const flaggedNodes = nodes.filter(    node => node.state === NODE_STATES.FLAGGED  );  let rehabIndex = 0;  const interval = setInterval(() => {    rehabProgress += 20;    rehabBar.style.width = rehabProgress + "%";    if (flaggedNodes[rehabIndex]) {      flaggedNodes[rehabIndex].state = NODE_STATES.REHABILITATED;      updateNodeVisual(flaggedNodes[rehabIndex]);      log(        `Node N${flaggedNodes[rehabIndex].id} authority restored.`      );      rehabIndex++;    }    if (rehabProgress >= 100) {      clearInterval(interval);      finalizeSimulation();    }  }, 700);}/* ===== FINALIZATION ===== */function finalizeSimulation() {  log("All compromised nodes rehabilitated.");  log("Authority stabilized across PolicyGrid.");  log("Simulation complete.");  simulationRunning = false;}/* ===== RESET & RUN ===== */function resetSimulation() {  firewallBar.style.width = "0%";  rehabBar.style.width = "0%";  logBox.innerHTML = "";  createNodes();}function runSimulation() {  if (simulationRunning) return;  simulationRunning = true;  resetSimulation();  log("PolicyGrid Simulator initialized.");  log("Distributed AI authority detected.");  setTimeout(runFirewallScan, 800);}/* ===== EVENT BINDING ===== */runBtn.addEventListener("click", runSimulation);/* ===== INITIAL LOAD ===== */createNodes();